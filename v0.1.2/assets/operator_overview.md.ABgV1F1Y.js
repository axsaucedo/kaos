import{_ as d,C as o,o as t,c as k,j as i,a,b as l,w as e,E as r,a3 as h,a2 as p}from"./chunks/framework.x4NSJ8gp.js";const b=JSON.parse('{"title":"Kubernetes Operator Overview","description":"","frontmatter":{},"headers":[],"relativePath":"operator/overview.md","filePath":"operator/overview.md"}'),c={name:"operator/overview.md"};function E(g,s,y,F,u,m){const n=o("Mermaid");return t(),k("div",null,[s[2]||(s[2]=i("h1",{id:"kubernetes-operator-overview",tabindex:"-1"},[a("Kubernetes Operator Overview "),i("a",{class:"header-anchor",href:"#kubernetes-operator-overview","aria-label":'Permalink to "Kubernetes Operator Overview"'},"​")],-1)),s[3]||(s[3]=i("p",null,"KAOS manages the lifecycle of AI agents and their dependencies on Kubernetes.",-1)),s[4]||(s[4]=i("h2",{id:"architecture",tabindex:"-1"},[a("Architecture "),i("a",{class:"header-anchor",href:"#architecture","aria-label":'Permalink to "Architecture"'},"​")],-1)),(t(),l(h,null,{default:e(()=>[r(n,{id:"mermaid-9",class:"mermaid",graph:"flowchart%20TB%0A%20%20%20%20subgraph%20api%5B%22Kubernetes%20API%20Server%22%5D%0A%20%20%20%20%20%20%20%20crd1%5B%22Agent%20CRD%22%5D%0A%20%20%20%20%20%20%20%20crd2%5B%22ModelAPI%20CRD%22%5D%0A%20%20%20%20%20%20%20%20crd3%5B%22MCPServer%20CRD%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20controller%5B%22Agentic%20Operator%20Controller%20Manager%3Cbr%2F%3E(kaos-system%20namespace)%22%5D%0A%20%20%20%20%20%20%20%20ar%5B%22AgentReconciler%22%5D%0A%20%20%20%20%20%20%20%20mr%5B%22ModelAPIReconciler%22%5D%0A%20%20%20%20%20%20%20%20mcpr%5B%22MCPServerReconciler%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20user%5B%22User%20Namespace%22%5D%0A%20%20%20%20%20%20%20%20ad%5B%22Agent%20Deployment%3Cbr%2F%3E%2B%20Service%3Cbr%2F%3E%2B%20ConfigMap%22%5D%0A%20%20%20%20%20%20%20%20md%5B%22ModelAPI%20Deploy%3Cbr%2F%3E%2B%20Service%3Cbr%2F%3E%2B%20ConfigMap%22%5D%0A%20%20%20%20%20%20%20%20mcpd%5B%22MCPServer%20Deploy%3Cbr%2F%3E%2B%20Service%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20crd1%20--%3E%20ar%0A%20%20%20%20crd2%20--%3E%20mr%0A%20%20%20%20crd3%20--%3E%20mcpr%0A%20%20%20%20%0A%20%20%20%20ar%20--%3E%20ad%0A%20%20%20%20mr%20--%3E%20md%0A%20%20%20%20mcpr%20--%3E%20mcpd%0A"})]),fallback:e(()=>[...s[0]||(s[0]=[a(" Loading... ",-1)])]),_:1})),s[5]||(s[5]=p('<h2 id="controllers" tabindex="-1">Controllers <a class="header-anchor" href="#controllers" aria-label="Permalink to &quot;Controllers&quot;">​</a></h2><h3 id="agentreconciler" tabindex="-1">AgentReconciler <a class="header-anchor" href="#agentreconciler" aria-label="Permalink to &quot;AgentReconciler&quot;">​</a></h3><p>Manages Agent custom resources:</p><ol><li><p><strong>Validate Dependencies</strong></p><ul><li>Check ModelAPI exists and is Ready</li><li>Check all MCPServers exist and are Ready</li></ul></li><li><p><strong>Resolve Peer Agents</strong></p><ul><li>Find Agent resources listed in <code>agentNetwork.access</code></li><li>Collect their service endpoints</li></ul></li><li><p><strong>Create/Update Deployment</strong></p><ul><li>Build environment variables</li><li>Configure container with agent image</li><li>Set resource limits</li></ul></li><li><p><strong>Create/Update Service</strong></p><ul><li>Only if <code>agentNetwork.expose: true</code></li><li>Exposes port 80 → container 8000</li></ul></li><li><p><strong>Update Status</strong></p><ul><li>Set phase (Pending/Ready/Failed)</li><li>Record endpoint URL</li><li>Track linked resources</li></ul></li></ol><h3 id="modelapireconciler" tabindex="-1">ModelAPIReconciler <a class="header-anchor" href="#modelapireconciler" aria-label="Permalink to &quot;ModelAPIReconciler&quot;">​</a></h3><p>Manages ModelAPI custom resources:</p><ol><li><p><strong>Determine Mode</strong></p><ul><li>Proxy: LiteLLM container</li><li>Hosted: Ollama container</li></ul></li><li><p><strong>Create ConfigMap</strong> (if needed)</p><ul><li>Wildcard mode: Auto-generated config</li><li>Config mode: User-provided YAML</li></ul></li><li><p><strong>Create/Update Deployment</strong></p><ul><li>Configure container and volumes</li><li>Set environment variables</li></ul></li><li><p><strong>Create/Update Service</strong></p><ul><li>Proxy: Port 8000</li><li>Hosted: Port 11434</li></ul></li><li><p><strong>Update Status</strong></p><ul><li>Record endpoint for agents to use</li></ul></li></ol><h3 id="mcpserverreconciler" tabindex="-1">MCPServerReconciler <a class="header-anchor" href="#mcpserverreconciler" aria-label="Permalink to &quot;MCPServerReconciler&quot;">​</a></h3><p>Manages MCPServer custom resources:</p><ol><li><p><strong>Determine Tool Source</strong></p><ul><li><code>mcp</code>: PyPI package name</li><li><code>toolsString</code>: Dynamic Python tools</li></ul></li><li><p><strong>Create/Update Deployment</strong></p><ul><li>For <code>mcp</code>: Use Python image with pip install</li><li>For <code>toolsString</code>: Use agent image with MCP_TOOLS_STRING</li></ul></li><li><p><strong>Create/Update Service</strong></p><ul><li>Port 80 → container 8000</li></ul></li><li><p><strong>Update Status</strong></p><ul><li>Record available tools</li></ul></li></ol><h2 id="resource-dependencies" tabindex="-1">Resource Dependencies <a class="header-anchor" href="#resource-dependencies" aria-label="Permalink to &quot;Resource Dependencies&quot;">​</a></h2>',11)),(t(),l(h,null,{default:e(()=>[r(n,{id:"mermaid-273",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20Agent%20--%3E%7Crequires%7C%20ModelAPI%5B%22ModelAPI%20(must%20be%20Ready)%22%5D%0A%20%20%20%20Agent%20-.-%3E%7Coptional%7C%20MCPServers%5B%22MCPServer%5B%5D%20(must%20be%20Ready)%22%5D%0A%20%20%20%20Agent%20-.-%3E%7Coptional%7C%20Peers%5B%22Agent%5B%5D%20(peer%20agents%2C%20must%20be%20Ready)%22%5D%0A"})]),fallback:e(()=>[...s[1]||(s[1]=[a(" Loading... ",-1)])]),_:1})),s[6]||(s[6]=p(`<p>The operator waits for dependencies before marking an Agent as Ready.</p><h2 id="status-phases" tabindex="-1">Status Phases <a class="header-anchor" href="#status-phases" aria-label="Permalink to &quot;Status Phases&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Phase</th><th>Description</th></tr></thead><tbody><tr><td><code>Pending</code></td><td>Resource created, waiting for dependencies</td></tr><tr><td><code>Ready</code></td><td>All dependencies ready, pods running</td></tr><tr><td><code>Failed</code></td><td>Error occurred during reconciliation</td></tr><tr><td><code>Waiting</code></td><td>Waiting for ModelAPI/MCPServer to become ready</td></tr></tbody></table><h2 id="environment-variable-mapping" tabindex="-1">Environment Variable Mapping <a class="header-anchor" href="#environment-variable-mapping" aria-label="Permalink to &quot;Environment Variable Mapping&quot;">​</a></h2><p>The operator translates CRD fields to container environment variables:</p><h3 id="agent-pod-environment" tabindex="-1">Agent Pod Environment <a class="header-anchor" href="#agent-pod-environment" aria-label="Permalink to &quot;Agent Pod Environment&quot;">​</a></h3><table tabindex="0"><thead><tr><th>CRD Field</th><th>Environment Variable</th></tr></thead><tbody><tr><td><code>metadata.name</code></td><td><code>AGENT_NAME</code></td></tr><tr><td><code>config.description</code></td><td><code>AGENT_DESCRIPTION</code></td></tr><tr><td><code>config.instructions</code></td><td><code>AGENT_INSTRUCTIONS</code></td></tr><tr><td>ModelAPI.status.endpoint</td><td><code>MODEL_API_URL</code></td></tr><tr><td><code>config.env[MODEL_NAME]</code></td><td><code>MODEL_NAME</code></td></tr><tr><td><code>config.reasoningLoopMaxSteps</code></td><td><code>AGENTIC_LOOP_MAX_STEPS</code></td></tr><tr><td><code>config.memory.enabled</code></td><td><code>MEMORY_ENABLED</code></td></tr><tr><td><code>config.memory.type</code></td><td><code>MEMORY_TYPE</code></td></tr><tr><td><code>config.memory.contextLimit</code></td><td><code>MEMORY_CONTEXT_LIMIT</code></td></tr><tr><td><code>config.memory.maxSessions</code></td><td><code>MEMORY_MAX_SESSIONS</code></td></tr><tr><td><code>config.memory.maxSessionEvents</code></td><td><code>MEMORY_MAX_SESSION_EVENTS</code></td></tr><tr><td><code>agentNetwork.access</code></td><td><code>PEER_AGENTS</code></td></tr><tr><td>Each peer agent</td><td><code>PEER_AGENT_&lt;NAME&gt;_CARD_URL</code></td></tr></tbody></table><h3 id="modelapi-pod-environment" tabindex="-1">ModelAPI Pod Environment <a class="header-anchor" href="#modelapi-pod-environment" aria-label="Permalink to &quot;ModelAPI Pod Environment&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Mode</th><th>Container</th><th>Key Environment</th></tr></thead><tbody><tr><td>Proxy</td><td>litellm/litellm</td><td><code>proxyConfig.env[]</code></td></tr><tr><td>Hosted</td><td>ollama/ollama</td><td><code>serverConfig.env[]</code>, model pulled on start</td></tr></tbody></table><h3 id="mcpserver-pod-environment" tabindex="-1">MCPServer Pod Environment <a class="header-anchor" href="#mcpserver-pod-environment" aria-label="Permalink to &quot;MCPServer Pod Environment&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Source</th><th>Container</th><th>Key Environment</th></tr></thead><tbody><tr><td><code>mcp</code></td><td>python:3.12-slim</td><td>Package installed via pip</td></tr><tr><td><code>toolsString</code></td><td>kaos-agent</td><td><code>MCP_TOOLS_STRING</code></td></tr></tbody></table><h2 id="rbac-requirements" tabindex="-1">RBAC Requirements <a class="header-anchor" href="#rbac-requirements" aria-label="Permalink to &quot;RBAC Requirements&quot;">​</a></h2><p>The operator requires specific permissions:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># In operator/config/rbac/role.yaml</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># DO NOT REMOVE - Required for leader election</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">coordination.k8s.io</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">leases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">patch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">events</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">patch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># For managing resources</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kaos.tools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">agents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">modelapis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mcpservers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">patch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">apps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deployments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">patch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiGroups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">configmaps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  verbs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">patch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p><strong>Important:</strong> RBAC rules are generated from <code>// +kubebuilder:rbac:</code> annotations in Go files. Never manually edit <code>role.yaml</code>.</p><h2 id="building-the-operator" tabindex="-1">Building the Operator <a class="header-anchor" href="#building-the-operator" aria-label="Permalink to &quot;Building the Operator&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> operator</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Generate CRDs and RBAC</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> manifests</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build binary</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/manager</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build Docker image</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Deploy to cluster</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span></span></code></pre></div><h2 id="running-locally" tabindex="-1">Running Locally <a class="header-anchor" href="#running-locally" aria-label="Permalink to &quot;Running Locally&quot;">​</a></h2><p>For development, run the operator locally:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Scale down deployed operator</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scale</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kaos-operator-controller-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kaos-system</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --replicas=0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run locally</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> operator</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span></span></code></pre></div><h2 id="watching-resources" tabindex="-1">Watching Resources <a class="header-anchor" href="#watching-resources" aria-label="Permalink to &quot;Watching Resources&quot;">​</a></h2><p>Monitor operator logs:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kaos-system</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  deployment/kaos-operator-controller-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span></span></code></pre></div><p>Watch custom resources:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> agents,modelapis,mcpservers</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -A</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -w</span></span></code></pre></div>`,25))])}const A=d(c,[["render",E]]);export{b as __pageData,A as default};
