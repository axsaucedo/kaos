import{_ as t,C as l,o as a,c as o,a2 as e,b as p,w as i,a as r,E as h,a3 as d}from"./chunks/framework.t1ycOn-0.js";const b=JSON.parse('{"title":"Core Concepts","description":"","frontmatter":{},"headers":[],"relativePath":"getting-started/concepts.md","filePath":"getting-started/concepts.md"}'),k={name:"getting-started/concepts.md"};function c(g,s,E,m,y,u){const n=l("Mermaid");return a(),o("div",null,[s[1]||(s[1]=e('<h1 id="core-concepts" tabindex="-1">Core Concepts <a class="header-anchor" href="#core-concepts" aria-label="Permalink to &quot;Core Concepts&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>KAOS provides a declarative way to deploy AI agents that can:</p><ul><li>Process natural language messages using LLMs</li><li>Call external tools via the Model Context Protocol (MCP)</li><li>Delegate tasks to other agents (Agent-to-Agent / A2A)</li><li>Maintain conversation memory and context</li></ul><h2 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">​</a></h2>',5)),(a(),p(d,null,{default:i(()=>[h(n,{id:"mermaid-34",class:"mermaid",graph:"flowchart%20TB%0A%20%20%20%20subgraph%20cluster%5B%22Kubernetes%20Cluster%22%5D%0A%20%20%20%20%20%20%20%20subgraph%20system%5B%22kaos-system%20namespace%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20operator%5B%22Agentic%20Operator%20Controller%3Cbr%2F%3E%E2%80%A2%20AgentReconciler%3Cbr%2F%3E%E2%80%A2%20ModelAPIReconciler%3Cbr%2F%3E%E2%80%A2%20MCPServerReconciler%22%5D%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20subgraph%20user%5B%22User%20Namespace%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20agent%5B%22Agent%20Pod%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20modelapi%5B%22ModelAPI%3Cbr%2F%3E(LiteLLM)%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20llm%5B%22LLM%3Cbr%2F%3E(Ollama)%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp%5B%22MCPServer%3Cbr%2F%3E(Tools)%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20agent%20--%3E%20modelapi%0A%20%20%20%20%20%20%20%20%20%20%20%20modelapi%20--%3E%20llm%0A%20%20%20%20%20%20%20%20%20%20%20%20agent%20--%3E%20mcp%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20end%0A"})]),fallback:i(()=>[...s[0]||(s[0]=[r(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=e(`<h2 id="custom-resource-definitions-crds" tabindex="-1">Custom Resource Definitions (CRDs) <a class="header-anchor" href="#custom-resource-definitions-crds" aria-label="Permalink to &quot;Custom Resource Definitions (CRDs)&quot;">​</a></h2><h3 id="agent" tabindex="-1">Agent <a class="header-anchor" href="#agent" aria-label="Permalink to &quot;Agent&quot;">​</a></h3><p>The Agent CRD defines an AI agent deployment. Each Agent:</p><ul><li>References a ModelAPI for LLM access</li><li>Can reference multiple MCPServers for tool access</li><li>Exposes HTTP endpoints for interaction</li><li>Can delegate to other Agents via A2A protocol</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kaos.tools/v1alpha1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Agent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-agent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  modelAPI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-model</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # Required: LLM backend</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mcpServers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">tools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Optional: Tool servers</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  agentNetwork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Optional: A2A networking</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    expose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    access</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">worker-1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:                 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Optional: Agent configuration</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    instructions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span></span></code></pre></div><h3 id="modelapi" tabindex="-1">ModelAPI <a class="header-anchor" href="#modelapi" aria-label="Permalink to &quot;ModelAPI&quot;">​</a></h3><p>The ModelAPI CRD deploys LLM access. Two modes:</p><p><strong>Proxy Mode</strong>: LiteLLM proxy to external backends</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Proxy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  proxyConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    apiBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://ollama:11434&quot;</span></span></code></pre></div><p><strong>Hosted Mode</strong>: Ollama running in-cluster</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Hosted</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  serverConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;smollm2:135m&quot;</span></span></code></pre></div><h3 id="mcpserver" tabindex="-1">MCPServer <a class="header-anchor" href="#mcpserver" aria-label="Permalink to &quot;MCPServer&quot;">​</a></h3><p>The MCPServer CRD deploys tool servers using the Model Context Protocol:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">python-runtime</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    mcp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;package-name&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # PyPI package</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # OR</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    toolsString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # Dynamic Python tools</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      def my_tool(x: str) -&gt; str:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          return x.upper()</span></span></code></pre></div><h2 id="agentic-loop" tabindex="-1">Agentic Loop <a class="header-anchor" href="#agentic-loop" aria-label="Permalink to &quot;Agentic Loop&quot;">​</a></h2><p>The agent implements a reasoning loop that enables tool use and delegation:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. Receive user message</span></span>
<span class="line"><span>2. Build system prompt (instructions + available tools + available agents)</span></span>
<span class="line"><span>3. Send to LLM</span></span>
<span class="line"><span>4. Parse response:</span></span>
<span class="line"><span>   - If contains tool_call → execute tool → add result → go to step 3</span></span>
<span class="line"><span>   - If contains delegate → invoke sub-agent → add response → go to step 3</span></span>
<span class="line"><span>   - Otherwise → return final response</span></span>
<span class="line"><span>5. Store events in memory</span></span></code></pre></div><p>Maximum iterations are controlled by <code>agenticLoop.maxSteps</code> (default: 5).</p><h2 id="agent-to-agent-a2a-protocol" tabindex="-1">Agent-to-Agent (A2A) Protocol <a class="header-anchor" href="#agent-to-agent-a2a-protocol" aria-label="Permalink to &quot;Agent-to-Agent (A2A) Protocol&quot;">​</a></h2><p>Agents can discover and invoke each other using the A2A protocol:</p><ol><li><strong>Discovery</strong>: Agents expose <code>/.well-known/agent</code> endpoint with capabilities</li><li><strong>Invocation</strong>: Agents call <code>/v1/chat/completions</code> on peer agents</li><li><strong>Delegation</strong>: Via agentic loop when model response contains a <code>delegate</code> block</li></ol><p>The operator automatically configures peer agent URLs based on <code>agentNetwork.access</code>.</p><h2 id="memory-and-sessions" tabindex="-1">Memory and Sessions <a class="header-anchor" href="#memory-and-sessions" aria-label="Permalink to &quot;Memory and Sessions&quot;">​</a></h2><p>Each agent maintains in-memory session storage:</p><ul><li>Sessions track conversation context</li><li>Events logged: user_message, agent_response, tool_call, delegation</li><li>Debug endpoints available for testing: <code>/memory/events</code>, <code>/memory/sessions</code></li></ul><p>Memory is per-pod and not persisted across restarts.</p><h2 id="environment-variable-configuration" tabindex="-1">Environment Variable Configuration <a class="header-anchor" href="#environment-variable-configuration" aria-label="Permalink to &quot;Environment Variable Configuration&quot;">​</a></h2><p>The operator configures agent pods via environment variables:</p><table tabindex="0"><thead><tr><th>Variable</th><th>Source</th></tr></thead><tbody><tr><td><code>AGENT_NAME</code></td><td>Agent metadata.name</td></tr><tr><td><code>MODEL_API_URL</code></td><td>ModelAPI status.endpoint</td></tr><tr><td><code>PEER_AGENTS</code></td><td>agentNetwork.access list</td></tr><tr><td><code>AGENTIC_LOOP_MAX_STEPS</code></td><td>config.agenticLoop.maxSteps</td></tr></tbody></table><p>See <a href="./../reference/environment-variables.html">Environment Variables</a> for complete list.</p>`,30))])}const v=t(k,[["render",c]]);export{b as __pageData,v as default};
