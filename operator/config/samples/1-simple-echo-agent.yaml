---
# Sample 1: Simple Echo Agent with MCP Server
# A single agent with access to an echo MCP tool and a hosted Ollama model
# Deploy: kubectl apply -f 1-simple-echo-agent.yaml

apiVersion: v1
kind: Namespace
metadata:
  name: kaos-simple
  labels:
    app.kubernetes.io/part-of: kaos-sample-simple

---
# ModelAPI: Hosted Ollama with smollm2 model (runs in-cluster)
apiVersion: kaos.tools/v1alpha1
kind: ModelAPI
metadata:
  name: simple-modelapi
  namespace: kaos-simple
spec:
  mode: Hosted
  hostedConfig:
    model: "smollm2:135m"
    env:
    - name: OLLAMA_DEBUG
      value: "false"

---
# MCPServer: Echo tool for testing
apiVersion: kaos.tools/v1alpha1
kind: MCPServer
metadata:
  name: simple-echo-mcp
  namespace: kaos-simple
spec:
  type: python-runtime
  config:
    tools:
      fromPackage: "test-mcp-echo-server"
    env:
    - name: LOG_LEVEL
      value: "INFO"

---
# Agent: Simple echo agent with MCP tool access
apiVersion: kaos.tools/v1alpha1
kind: Agent
metadata:
  name: simple-agent
  namespace: kaos-simple
spec:
  modelAPI: simple-modelapi
  mcpServers:
  - simple-echo-mcp
  config:
    description: "A simple echo agent for testing"
    instructions: |
      You are a helpful assistant with access to an echo tool.
      When asked to echo something, use the echo tool to return the message.
      Always provide clear and concise responses.
    reasoningLoopMaxSteps: 5
    env:
    - name: MODEL_NAME
      value: "smollm2:135m"
  agentNetwork:
    access: []
