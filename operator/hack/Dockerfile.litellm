FROM python:3.12-slim

# Avoid .pyc, enable unbuffered logs
ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1

WORKDIR /app

# Install LiteLLM proxy deps with pinned version
# Using cache mount for pip to speed up rebuilds
RUN --mount=type=cache,target=/root/.cache/pip \
    pip install "litellm[proxy]==1.56.5"

# Port 8000 to match operator controller expectations
EXPOSE 8000

# Use ENTRYPOINT only - let the operator provide the args via deployment spec
ENTRYPOINT ["litellm"]
