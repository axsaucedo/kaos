import{_ as s,o as a,c as i,ag as t}from"./chunks/framework.BypL_Yd_.js";const g=JSON.parse('{"title":"Release Process","description":"","frontmatter":{},"headers":[],"relativePath":"development/releasing.md","filePath":"development/releasing.md"}'),o={name:"development/releasing.md"};function n(l,e,r,d,h,p){return a(),i("div",null,[...e[0]||(e[0]=[t(`<h1 id="release-process" tabindex="-1">Release Process <a class="header-anchor" href="#release-process" aria-label="Permalink to &quot;Release Process&quot;">​</a></h1><p>This document describes the KAOS release process, versioning strategy, and how documentation is published.</p><h2 id="version-management" tabindex="-1">Version Management <a class="header-anchor" href="#version-management" aria-label="Permalink to &quot;Version Management&quot;">​</a></h2><h3 id="version-file" tabindex="-1">VERSION File <a class="header-anchor" href="#version-file" aria-label="Permalink to &quot;VERSION File&quot;">​</a></h3><p>KAOS uses a single <code>VERSION</code> file at the repository root as the source of truth for development versions:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>0.1.1-dev</span></span></code></pre></div><p>This version format follows these conventions:</p><ul><li><strong>Development</strong>: <code>X.Y.Z-dev</code> (e.g., <code>0.1.1-dev</code>)</li><li><strong>Release</strong>: <code>X.Y.Z</code> (e.g., <code>0.1.0</code>) - derived from git tags</li></ul><h3 id="component-version-formats" tabindex="-1">Component Version Formats <a class="header-anchor" href="#component-version-formats" aria-label="Permalink to &quot;Component Version Formats&quot;">​</a></h3><p>Different components use slightly different version formats due to ecosystem requirements:</p><table tabindex="0"><thead><tr><th>Component</th><th>Dev Format</th><th>Release Format</th><th>Example</th></tr></thead><tbody><tr><td>VERSION file</td><td><code>X.Y.Z-dev</code></td><td><code>X.Y.Z</code></td><td><code>0.1.1-dev</code></td></tr><tr><td>Helm chart</td><td><code>X.Y.Z-dev</code></td><td><code>X.Y.Z</code></td><td><code>0.1.1-dev</code></td></tr><tr><td>Python (PEP 440)</td><td><code>X.Y.Z.dev0</code></td><td><code>X.Y.Z</code></td><td><code>0.1.1.dev0</code></td></tr><tr><td>Docker images</td><td><code>X.Y.Z-dev</code></td><td><code>X.Y.Z</code></td><td><code>0.1.1-dev</code></td></tr></tbody></table><h2 id="creating-a-release" tabindex="-1">Creating a Release <a class="header-anchor" href="#creating-a-release" aria-label="Permalink to &quot;Creating a Release&quot;">​</a></h2><p>Releases are triggered by creating a git tag on the <code>main</code> branch:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Ensure you&#39;re on main and up to date</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create and push the release tag</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tag</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v0.1.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v0.1.0</span></span></code></pre></div><h3 id="release-workflow" tabindex="-1">Release Workflow <a class="header-anchor" href="#release-workflow" aria-label="Permalink to &quot;Release Workflow&quot;">​</a></h3><p>When a tag matching <code>v*</code> is pushed, the release workflow automatically:</p><ol><li><strong>Validates</strong> the version format and checks tests pass</li><li><strong>Builds Docker images</strong> for operator and agent runtimes</li><li><strong>Publishes images</strong> to Docker Hub with the release version tag</li><li><strong>Packages Helm chart</strong> with the release version</li><li><strong>Publishes Python package</strong> (kaos-cli) to PyPI</li><li><strong>Deploys versioned documentation</strong> to GitHub Pages</li><li><strong>Creates GitHub Release</strong> with auto-generated release notes</li><li><strong>Bumps version on main</strong> by creating a PR for the next dev version</li></ol><h3 id="version-bumping" tabindex="-1">Version Bumping <a class="header-anchor" href="#version-bumping" aria-label="Permalink to &quot;Version Bumping&quot;">​</a></h3><p>After a release, the workflow automatically:</p><ul><li>Creates a branch <code>bump/X.Y.(Z+1)-dev</code></li><li>Updates VERSION file to <code>X.Y.(Z+1)-dev</code></li><li>Updates Python package versions to <code>X.Y.(Z+1).dev0</code></li><li>Updates Helm chart version to <code>X.Y.(Z+1)-dev</code></li><li>Opens a PR to merge these changes to main</li></ul><p>Example: Releasing <code>v0.1.0</code> creates a PR to bump to <code>0.1.1-dev</code>.</p><h2 id="documentation-versioning" tabindex="-1">Documentation Versioning <a class="header-anchor" href="#documentation-versioning" aria-label="Permalink to &quot;Documentation Versioning&quot;">​</a></h2><h3 id="multi-version-structure" tabindex="-1">Multi-Version Structure <a class="header-anchor" href="#multi-version-structure" aria-label="Permalink to &quot;Multi-Version Structure&quot;">​</a></h3><p>Documentation is published to GitHub Pages with the following structure:</p><ul><li><code>/kaos/</code> → Redirects to <code>/kaos/latest/</code></li><li><code>/kaos/dev/</code> → Development documentation (from <code>main</code> branch)</li><li><code>/kaos/latest/</code> → Latest stable release documentation</li><li><code>/kaos/vX.Y.Z/</code> → Immutable documentation for specific releases</li></ul><h3 id="version-switcher" tabindex="-1">Version Switcher <a class="header-anchor" href="#version-switcher" aria-label="Permalink to &quot;Version Switcher&quot;">​</a></h3><p>The documentation includes a version switcher in the navigation bar that dynamically lists available versions based on git tags.</p><h3 id="when-docs-are-published" tabindex="-1">When Docs Are Published <a class="header-anchor" href="#when-docs-are-published" aria-label="Permalink to &quot;When Docs Are Published&quot;">​</a></h3><ul><li><strong>Dev docs</strong> (<code>/kaos/dev/</code>): Updated on every push to <code>main</code> that changes the docs</li><li><strong>Release docs</strong> (<code>/kaos/vX.Y.Z/</code> and <code>/kaos/latest/</code>): Published when a release tag is created</li></ul><h2 id="helm-chart-repository" tabindex="-1">Helm Chart Repository <a class="header-anchor" href="#helm-chart-repository" aria-label="Permalink to &quot;Helm Chart Repository&quot;">​</a></h2><p>The Helm chart is available at:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kaos</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://axsaucedo.github.io/kaos/charts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> search</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kaos</span></span></code></pre></div><p>Both development and release versions are published:</p><ul><li>Dev versions: <code>X.Y.Z-dev</code> (from main branch)</li><li>Release versions: <code>X.Y.Z</code> (from release tags)</li></ul><h2 id="pypi-package" tabindex="-1">PyPI Package <a class="header-anchor" href="#pypi-package" aria-label="Permalink to &quot;PyPI Package&quot;">​</a></h2><p>The kaos-cli package is published to PyPI only for releases:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kaos-cli</span></span></code></pre></div><p>Development versions are not published to PyPI. For development, install directly from source:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kaos-cli</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><h2 id="design-decisions" tabindex="-1">Design Decisions <a class="header-anchor" href="#design-decisions" aria-label="Permalink to &quot;Design Decisions&quot;">​</a></h2><h3 id="why-tag-triggered-releases" tabindex="-1">Why Tag-Triggered Releases? <a class="header-anchor" href="#why-tag-triggered-releases" aria-label="Permalink to &quot;Why Tag-Triggered Releases?&quot;">​</a></h3><p>Using git tags to trigger releases keeps the process simple:</p><ul><li>No release branches to maintain</li><li>No manual version editing required</li><li>Clear audit trail through git history</li><li>Easy to create hotfix releases on any commit</li></ul><h3 id="why-always-1-patch-for-bumps" tabindex="-1">Why Always +1 Patch for Bumps? <a class="header-anchor" href="#why-always-1-patch-for-bumps" aria-label="Permalink to &quot;Why Always +1 Patch for Bumps?&quot;">​</a></h3><p>After each release, the patch version is always incremented by 1. For major or minor version bumps, simply create the appropriate tag:</p><ul><li>Current: <code>0.5.9-dev</code></li><li>Want to release <code>0.6.0</code>: Tag as <code>v0.6.0</code></li><li>Bump creates PR for: <code>0.6.1-dev</code></li></ul><p>This keeps the automation simple while supporting semantic versioning.</p><h3 id="why-separate-dev-and-release-docs" tabindex="-1">Why Separate Dev and Release Docs? <a class="header-anchor" href="#why-separate-dev-and-release-docs" aria-label="Permalink to &quot;Why Separate Dev and Release Docs?&quot;">​</a></h3><p>Keeping development documentation at <code>/kaos/dev/</code> allows:</p><ul><li>Users to see upcoming features</li><li>Contributors to reference latest docs</li><li>Clear distinction between stable and in-progress content</li></ul><h2 id="repository-settings-requirements" tabindex="-1">Repository Settings Requirements <a class="header-anchor" href="#repository-settings-requirements" aria-label="Permalink to &quot;Repository Settings Requirements&quot;">​</a></h2><p>For the automated version bump PR to work, ensure these settings are enabled in your GitHub repository:</p><ol><li>Go to <strong>Settings</strong> → <strong>Actions</strong> → <strong>General</strong></li><li>Under &quot;Workflow permissions&quot;, select <strong>Read and write permissions</strong></li><li>Check <strong>Allow GitHub Actions to create and approve pull requests</strong></li></ol><p>Without these settings, the bump-version job will fail with &quot;GitHub Actions is not permitted to create or approve pull requests&quot;.</p>`,54)])])}const u=s(o,[["render",n]]);export{g as __pageData,u as default};
